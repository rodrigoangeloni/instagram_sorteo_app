<!DOCTYPE html>
<html lang="es">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>🎉 Instagram Sorteo App</title>
    <link rel="stylesheet" href="style.css">
    <link rel="preconnect" href="https://fonts.googleapis.com">
    <link rel="preconnect" href="https://fonts.gstatic.com" crossorigin>
    <link href="https://fonts.googleapis.com/css2?family=Poppins:wght@300;400;500;600;700&display=swap" rel="stylesheet">
</head>
<body>
    <div class="container">
        <header>
            <h1>🎉 Instagram Sorteo App</h1>
            <p>Realiza sorteos justos y automáticos en Instagram</p>
        </header>

        <main>
            <!-- Estado de Login -->
            <section id="login-section" class="section">
                <div class="login-card">
                    <h2>¡Bienvenido!</h2>
                    <p>Conecta tu cuenta profesional de Instagram para comenzar a realizar sorteos automáticos.</p>
                    <div style="margin: 30px 0;">
                        <div style="font-size: 4rem; margin-bottom: 20px;">📱</div>
                        <p><strong>Requisitos:</strong></p>
                        <ul style="text-align: left; margin: 15px 0; padding-left: 20px;">
                            <li>✅ Cuenta Profesional de Instagram (Empresa o Creador)</li>
                            <li>🔗 Vinculada a una Página de Facebook</li>
                            <li>👑 Permisos de administrador en la página</li>
                        </ul>
                    </div>
                    <a href="/login" class="btn-primary">
                        📱 Conectar con Instagram
                    </a>
                </div>
            </section>

            <!-- Estado de Usuario Logueado -->
            <section id="user-section" class="section" style="display: none;">
                <div class="sorteo-card">
                    <!-- Info del usuario -->
                    <div class="user-info">
                        <img id="user-avatar" src="" alt="Avatar">
                        <div class="user-details">
                            <span id="user-name">@username</span>
                            <a href="/logout" class="btn-secondary">Cerrar Sesión</a>
                        </div>
                    </div>

                    <h2>Realizar Sorteo</h2>
                    <p>Simplemente pega la URL del post de Instagram y ¡listo!</p>

                    <form id="sorteo-form">
                        <div class="input-group">
                            <label for="post-url">URL del Post de Instagram:</label>
                            <input 
                                type="url" 
                                id="post-url" 
                                name="post-url" 
                                placeholder="https://www.instagram.com/p/..."
                                required
                            >
                            <small>Ejemplo: https://www.instagram.com/p/ABC123/</small>
                        </div>

                        <!-- Requisitos automáticos -->
                        <div class="requirements">
                            <h3>📋 Requisitos para participar:</h3>
                            <ul>
                                <li id="req-follow">✅ Seguir la cuenta <strong id="account-name">@tu_cuenta</strong></li>
                                <li id="req-like">❤️ Dar like al post</li>
                                <li id="req-comment">💬 Comentar en el post</li>
                            </ul>
                            <small style="color: #666; font-size: 0.9rem; margin-top: 10px; display: block;">
                                Los requisitos se actualizan automáticamente con tu nombre de usuario.
                            </small>
                        </div>

                        <button type="submit" class="btn-primary">
                            🎯 Realizar Sorteo
                        </button>
                    </form>
                </div>
            </section>

            <!-- Estado de Loading -->
            <section id="loading-section" class="section" style="display: none;">
                <div class="loading-card">
                    <div class="spinner"></div>
                    <h2>🔍 Analizando sorteo...</h2>
                    <p>Extrayendo comentarios, verificando seguidores y likes...</p>
                    <p><small>Esto puede tomar unos segundos ⏱️</small></p>
                </div>
            </section>

            <!-- Estado de Resultado -->
            <section id="resultado-section" class="section" style="display: none;">
                <div class="resultado-card">
                    <!-- Ganador -->
                    <div id="ganador-container" style="display: none;">
                        <div class="ganador">
                            <div class="ganador-avatar">🏆</div>
                            <h3>¡Felicidades al ganador!</h3>
                            <div class="ganador-nombre" id="ganador-username">@username</div>
                            <div class="ganador-comentario" id="ganador-comentario">"Comentario del ganador"</div>
                        </div>
                    </div>

                    <!-- Sin ganador -->
                    <div id="no-ganador-container" style="display: none;">
                        <div class="no-ganador">
                            <div class="no-ganador-icon">😔</div>
                            <h3>No hay ganador</h3>
                            <p id="no-ganador-mensaje">No hay participantes que cumplan todos los requisitos.</p>
                        </div>
                    </div>

                    <!-- Estadísticas -->
                    <div class="stats">
                        <div class="stat">
                            <span class="stat-number" id="stat-comentarios">0</span>
                            <span class="stat-label">Comentarios</span>
                        </div>
                        <div class="stat">
                            <span class="stat-number" id="stat-participantes">0</span>
                            <span class="stat-label">Participantes Válidos</span>
                        </div>
                        <div class="stat">
                            <span class="stat-number" id="stat-seguidores">0</span>
                            <span class="stat-label">Seguidores</span>
                        </div>
                        <div class="stat">
                            <span class="stat-number" id="stat-likes">0</span>
                            <span class="stat-label">Likes</span>
                        </div>
                    </div>

                    <button id="nuevo-sorteo" class="btn-primary" style="margin-top: 30px;">
                        🎲 Realizar Otro Sorteo
                    </button>
                </div>
            </section>

            <!-- Error -->
            <div id="error-message" class="error-message" style="display: none;">
                <strong>❌ Error:</strong> <span id="error-text"></span>
            </div>
        </main>

        <footer>
            <p>Instagram Sorteo App v2.0.0 - Sorteos justos y automáticos 🎯</p>
        </footer>
    </div>

    <script src="script.js"></script>
</body>
</html>
